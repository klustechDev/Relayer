name: Formatting

on: pull_request

jobs:
  format:
    name: format
    runs-on: ubuntu-latest
    steps:
      - name: Check out main branch
        uses: actions/checkout@v3

      - name: Install Rust toolchain
        uses: dtolnay/rust-toolchain@1.70.0
        with:
          components: rustfmt

      - uses: Swatinem/rust-cache@v2
        with:
          cache-on-failure: true

      - name: Setup Scarb
        uses: software-mansion/setup-scarb@v1.0.1
        with:
          scarb-version: "0.5.2"

      - name: Check Cairo formatting
        run: scarb fmt --check

      - name: Check Rust formatting
        run: cargo fmt --check
      